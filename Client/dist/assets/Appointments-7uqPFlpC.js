import{j as e,r as n,c as D}from"./index-DDg8tmzP.js";import{S as E}from"./Sidebar-DnT6ow9c.js";import{c as Y,d as L}from"./index-C2XjEMwL.js";import{y as M}from"./userService-B62CsAJS.js";import"./user-BohdSzpg.js";const U=({show:c,onClose:i,appointment:t,formatDate:o})=>{var d;return c?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-3/4 md:w-1/2 lg:w-1/3 transform transition-all duration-300 ease-out",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-700",children:t.status==="Cancelled"?"Appointment Cancelled":"Appointment Details"}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-red-500 text-2xl font-bold",children:"×"})]}),((d=t.payment)==null?void 0:d.status)==="Refunded"?e.jsx("div",{className:"text-center text-gray-700",children:"Your payment of ₹499 has been refunded. Please check your account."}):e.jsx("div",{className:"mt-6 space-y-4",children:t.status==="Cancelled"?e.jsxs("div",{className:"text-center text-gray-700",children:["Your appointment with Dr. ",t.doctorName," on"," ",o(t.date)," at ",t.shift," has been cancelled due to some emergency. Your amount of ₹499 will be credited to your Acoount back with in 7working days after admin verification."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-1/3",children:"Doctor Name:"}),e.jsxs("span",{className:"text-gray-900",children:["Dr. ",t.doctorName]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-1/3",children:"Expertise:"}),e.jsx("span",{className:"text-gray-900",children:t.expertise})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-1/3",children:"Experience:"}),e.jsxs("span",{className:"text-gray-900",children:[t.experience," Years"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-1/3",children:"Gender:"}),e.jsx("span",{className:"text-gray-900",children:t.gender})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-1/3",children:"Booking Date:"}),e.jsx("span",{className:"text-gray-900",children:o(t.date)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-1/3",children:"Status:"}),e.jsx("span",{className:`text-gray-900 ${t.status==="Active"?"text-blue-500":t.status==="Cancelled"?"text-red-500":"text-green-500"}`,children:t.status==="Active"?"Upcoming":t.status==="Cancelled"?"Cancelled":"Completed"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-1/3",children:"Scheduled on:"}),e.jsx("span",{className:"text-gray-900",children:t.shift})]})]})}),e.jsx("div",{className:"mt-6 text-right",children:e.jsx("button",{onClick:i,className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors duration-200",children:"Close"})})]})}):null};function G(){const[c,i]=n.useState([]),[t,o]=n.useState(!0),[d,f]=n.useState(null),[h,b]=n.useState(null),[r,m]=n.useState(1),g=8,p=D(s=>s.user).user._id;n.useEffect(()=>{(async()=>{try{const a=await M(p);i(a.data)}catch(a){f(a.message)}finally{o(!1)}})()},[]);function y(s){const a=new Date(s),u={year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("en-US",u)}function N(s){b(s)}function w(){b(null)}const j=r*g,v=j-g,C=c.slice(v,j),x=Math.ceil(c.length/g);function A(s){m(s)}function S(){r<x&&m(r+1)}function P(){r>1&&m(r-1)}function k(){const s=[],a=Math.max(1,r-1),u=Math.min(a+2,x);for(let l=a;l<=u;l++)s.push(l);return s.map(l=>e.jsx("button",{onClick:()=>A(l),className:`mx-1 px-3 py-1 border rounded ${r===l?"bg-blue-500 text-white":"bg-white text-blue-500 hover:bg-blue-500 hover:text-white"}`,children:l},l))}return t?e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):d?e.jsxs("div",{className:"text-red-500 text-center mt-4",children:["Error: ",d]}):e.jsxs("div",{className:"bg-gray-100",children:[e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-12 gap-6 px-4",children:[e.jsx(E,{}),e.jsx("div",{className:"col-span-3 sm:col-span-9",children:e.jsxs("div",{className:"bg-white p-4 shadow rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:c.length?"Your Appointments":"You Have No Appointments"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 bg-gray-200 text-gray-600 font-semibold border-b",children:"Doctor Name"}),e.jsx("th",{className:"py-2 px-4 bg-gray-200 text-gray-600 font-semibold border-b",children:"Expertise"}),e.jsx("th",{className:"py-2 px-4 bg-gray-200 text-gray-600 font-semibold border-b",children:"Experience"}),e.jsx("th",{className:"py-2 px-4 bg-gray-200 text-gray-600 font-semibold border-b",children:"Gender"}),e.jsx("th",{className:"py-2 px-3 bg-gray-200 text-gray-600 font-semibold border-b",children:"Booking Date"}),e.jsx("th",{className:"py-2 px-4 bg-gray-200 text-gray-600 font-semibold border-b",children:"Status"}),e.jsx("th",{className:"py-2 px-4 bg-gray-200 text-gray-600 font-semibold border-b",children:"Time"}),e.jsx("th",{className:"py-2 px-4 bg-gray-200 text-gray-600 font-semibold border-b",children:"Actions"})]})}),e.jsx("tbody",{children:C.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"py-2 px-3",children:["DR ",s.doctorName]}),e.jsx("td",{className:"py-2 px-4",children:s.expertise}),e.jsxs("td",{className:"py-2 px-4",children:[s.experience,"-Years"]}),e.jsx("td",{className:"py-2 px-4",children:s.gender}),e.jsx("td",{className:"py-2 px-4",children:y(s.date)}),e.jsx("td",{className:`py-2 px-4 rounded ${s.status==="Active"?"text-blue-500 bg-blue-100":s.status==="Cancelled"?"text-red-500 bg-red-100":s.status==="Completed"?"text-green-500 bg-green-100":""}`,children:s.status==="Active"?"Upcoming":s.status==="Cancelled"?"Cancelled":s.status==="Completed"?"Completed":s.status}),e.jsx("td",{className:"py-2 px-4",children:s.shift}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("button",{onClick:()=>N(s),className:"bg-blue-500 text-white py-1 px-2 rounded hover:bg-blue-700",children:"View"})})]},s._id))})]})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:P,className:`mx-1 px-3 py-1 border rounded ${r===1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-white text-blue-500 hover:bg-blue-500 hover:text-white"}`,disabled:r===1,children:e.jsx(Y,{})}),k(),e.jsx("button",{onClick:S,className:`mx-1 px-3 py-1 border rounded ${r===x?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-white text-blue-500 hover:bg-blue-500 hover:text-white"}`,disabled:r===x,children:e.jsx(L,{})})]})]})})]})}),h&&e.jsx(U,{show:!!h,onClose:w,appointment:h,formatDate:y})]})}export{G as default};
