import{u as D,d as Y,j as e,o as A,i as M,r as p,c as f}from"./index-DDg8tmzP.js";import{f as B}from"./doctorService-BeaFpf1z.js";import{C as j,a as N,L as v,P as E,b as T,p as w,c as k,d as C,e as S,B as _,h as u,f as L}from"./moment-Bg4gks8L.js";function $(){const s=D(),o=Y(),d=()=>{try{o(A()),M.remove("doctortoken"),s("/")}catch(n){console.log(n)}};return e.jsx("div",{children:e.jsx("section",{className:"bg-white dark:bg-gray-900",children:e.jsx("div",{className:"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6",children:e.jsxs("div",{className:"mx-auto max-w-screen-sm text-center",children:[e.jsx("h1",{className:"mb-4 text-7xl tracking-tight font-extrabold lg:text-9xl text-primary-600 dark:text-primary-500",children:"WELCOME TO MIND CARE"}),e.jsx("p",{className:"mb-4 text-3xl tracking-tight font-bold text-gray-900 md:text-4xl dark:text-white",children:"Oops."}),e.jsxs("p",{className:"mb-4 text-lg font-light text-gray-500 dark:text-gray-400",children:["Sorry, Your verification is still going on by admin. Try login later....."," "]}),e.jsx("button",{onClick:d,className:"inline-flex text-white bg-black hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:focus:ring-primary-900 my-4",children:"Back to Home"})]})})})})}j.register(N,v,E,T,w,k,C);function P({appointments:s}){const[o,d]=p.useState("month"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=[...new Set(s.map(t=>new Date(t.date).getFullYear()))].sort((t,r)=>t-r),c={},g={};s.forEach(t=>{const r=new Date(t.date),l=r.getFullYear(),h=r.getMonth();c[l]||(c[l]=Array(12).fill(0)),c[l][h]+=1,g[l]||(g[l]=0),g[l]+=1}),x.map((t,r)=>{const l=["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)"],h=["rgba(255, 99, 132, 0.8)","rgba(54, 162, 235, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(255, 205, 86, 0.8)"],y=r%l.length;return{label:`Year ${t}`,data:Object.values(c[t]),borderColor:h[y],backgroundColor:l[y],fill:!1}});const i=Array(12).fill(0);Object.values(c).forEach(t=>{t.forEach((r,l)=>{i[l]+=r})});const b={labels:o==="month"?n:x,datasets:o==="month"?[{label:"Total Appointments by Month",data:i,borderColor:"rgba(255, 99, 132, 0.8)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!1}]:[{label:"Total Appointments by Year",data:x.map(t=>g[t]),borderColor:"rgba(75, 192, 192, 0.8)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!1}]},a={plugins:{legend:{labels:{color:"rgba(255, 255, 255, 0.8)"}},tooltip:{callbacks:{label:function(t){return o==="year"?[`Year ${t.label}: ${t.raw} appointments`]:`${n[t.dataIndex]}: ${t.raw} appointments`}}}},scales:{x:{ticks:{color:"rgba(255, 255, 255, 0.8)"},grid:{color:"rgba(255, 255, 255, 0.1)"},title:{display:!0,text:o==="month"?"Months":"Years",color:"rgba(255, 255, 255, 0.8)"}},y:{ticks:{color:"rgba(255, 255, 255, 0.8)"},grid:{color:"rgba(255, 255, 255, 0.1)"},title:{display:!0,text:"Appointments",color:"rgba(255, 255, 255, 0.8)"}}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("button",{className:`mr-2 px-4 py-2 rounded ${o==="month"?"bg-blue-500 text-white":"bg-gray-500 text-white"}`,onClick:()=>d("month"),children:"Month-wise"}),e.jsx("button",{className:`px-4 py-2 rounded ${o==="year"?"bg-blue-500 text-white":"bg-gray-500 text-white"}`,onClick:()=>d("year"),children:"Year-wise"})]}),e.jsxs("h2",{className:"text-xl mb-4 text-gray-300",children:["Total Appointments by ",o==="month"?"Month":"Year"]}),e.jsx(S,{data:b,options:a})]})}j.register(N,v,_,w,k,C);function I({appointments:s}){const o=()=>{const i=[];for(let m=6;m>=0;m--)i.push(u().subtract(m,"days").format("YYYY-MM-DD"));return i},d=(i,m,b)=>o().map(t=>{let r=0;return i.forEach(l=>{u(l[m]).format(b)===t&&r++}),r}),n=o().map(i=>u(i).format("MM-DD")),x=d(s,"date","YYYY-MM-DD"),c={labels:n,datasets:[{label:"Appointments",data:x,backgroundColor:"rgba(57, 89, 255, 0.8)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255, 255, 255, 0.8)"}}},scales:{x:{ticks:{color:"rgba(255, 255, 255, 0.8)"},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{ticks:{color:"rgba(255, 255, 255, 0.8)"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl mb-2 text-gray-300",children:"Total Appointments by last week"}),e.jsx("div",{style:{height:"250px"},children:e.jsx(L,{data:c,options:g})})]})}function O(){const s=f(a=>a.doctor.doctor),[o,d]=p.useState([]),[n,x]=p.useState([]);p.useEffect(()=>{const a=async()=>{try{const t=await B(s==null?void 0:s._id);if(t.status===200){x(t.data);const r=c(t.data);d(r)}}catch(t){console.error("Error fetching appointments:",t)}};s!=null&&s._id&&a()},[s==null?void 0:s._id]);const c=a=>{const t={};return a.forEach(r=>{t[r.userId.email]||(t[r.userId.email]=r.userId)}),Object.values(t)},g=n.filter(a=>a.status==="Completed").length,i=n.filter(a=>a.status==="Cancelled").length,m=n.filter(a=>a.status==="Active").length,b=[...n].sort((a,t)=>new Date(t.date)-new Date(a.date)).slice(0,10);return e.jsxs("div",{className:"container mx-auto py-6 px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gray-800 p-4 border border-gray-600 rounded-lg",children:e.jsx(P,{appointments:n})}),e.jsxs("div",{className:"bg-gray-800 p-4 border border-gray-600 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-white"}),e.jsx(I,{appointments:n})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-gray-800 p-4 border border-gray-600 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consulted Patients"}),e.jsx("ul",{className:"text-white overflow-y-auto",style:{maxHeight:"200px"},children:o.map(a=>e.jsxs("div",{className:"flex mt-2",children:[e.jsx("img",{src:a.profile||"/assets/user.png",alt:`${a.name}'s profile`,className:"w-8 h-8 rounded-full mr-2"}),e.jsx("li",{className:"border-b border-gray-700 py-1",children:a.name},a._id)]}))})]}),e.jsxs("div",{className:"bg-gray-800 p-4 border border-gray-600 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Latest Appointments"}),e.jsx("ul",{className:"text-white overflow-y-auto",style:{maxHeight:"200px"},children:b.map(a=>e.jsxs("li",{className:"border-b border-gray-700 py-1 text-sm",children:[new Date(a.date).toLocaleDateString()," with ",a.userId.name," on ",a.shift]},a._id))})]}),e.jsx("div",{className:"bg-gray-800 p-4 border border-gray-600 rounded-lg flex flex-col items-center justify-center",children:e.jsxs("div",{className:"text-white text-center text-xl space-y-2",children:[e.jsxs("div",{className:"bg-green-500 p-2 rounded-md text-sm",children:["Total Completed Bookings: ",g]}),e.jsxs("div",{className:"bg-red-500 p-2 rounded-md  text-sm",children:["Total Cancelled Bookings: ",i]}),e.jsxs("div",{className:"bg-blue-500 p-2 rounded-md  text-sm",children:["Total Pending  Bookings: ",m]})]})})]})]})}function R(){const s=f(o=>o.doctor);return e.jsx(e.Fragment,{children:s.doctor.is_verified?e.jsx(O,{}):e.jsx($,{})})}export{R as default};
