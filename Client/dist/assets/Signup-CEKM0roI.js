import{r as m,u as N,j as e,G as E,L as k,_ as x}from"./index-DDg8tmzP.js";import{a as g,i as S,b as C,p as P}from"./validation-B-glGIGy.js";import{j as F}from"./index-VWaDGczM.js";import{g as D,a as R}from"./userAuth-B5iPBnBM.js";function A(){const[d,h]=m.useState(!1),b=N(),[i,p]=m.useState({emailred:!1,namered:!1,passwordred:!1,confirmpasswordred:!1}),[n,u]=m.useState({emailerr:"",nameerr:"",passworderr:"",confirmpassworderr:""});m.useEffect(()=>{if(Object.values(i).some(s=>s)||Object.values(n).some(s=>s)){const s=setTimeout(()=>{p({emailred:!1,namered:!1,passwordred:!1,confirmpasswordred:!1}),u({emailerr:"",nameerr:"",passworderr:"",confirmpassworderr:""})},3e3);return()=>clearTimeout(s)}},[i,n]);const[r,y]=m.useState({name:"",email:"",password:"",confirmpassword:""}),c=t=>{y({...r,[t.target.name]:t.target.value})},j=async t=>{const{email:s,name:a}=t;try{D(s,a)}catch(o){const{status:l,data:w}=o.response;l&&setErrorMessage(w.message),x.error(w.message)}},v=async t=>{t.preventDefault();let s={emailred:!1,namered:!1,passwordred:!1,confirmpasswordred:!1},a={emailerr:"",nameerr:"",passworderr:"",confirmpassworderr:""};if(g(r.email)?(s.emailred=!0,a.emailerr="Email can't be empty"):S(r.email)||(s.emailred=!0,a.emailerr="Enter a valid email"),g(r.name)&&(s.namered=!0,a.nameerr="Name can't be empty"),g(r.password))s.passwordred=!0,a.passworderr="Password can't be empty";else{const o=C(r.password);o.valid?(s.passwordred=!1,a.passworderr=""):(s.passwordred=!0,a.passworderr=o.message)}if(g(r.confirmpassword)?(s.confirmpasswordred=!0,a.confirmpassworderr="Confirm password can't be empty"):P(r.password,r.confirmpassword)&&(s.confirmpasswordred=!0,a.confirmpassworderr="Passwords don't match"),p(s),u(a),!s.emailred&&!s.namered&&!s.passwordred&&!s.confirmpasswordred){const o=await R(r);o.data.message==="OTP sent"?(x.success("Enter otp send to your mail"),b("/otp",{state:{email:r.email}})):o.data.message==="Email exists!"?(x.error("Email already exists!"),p(l=>({...l,emailred:!0})),u(l=>({...l,emailerr:"Email already exists!"}))):console.error("Error registering user:",o.statusText)}},f=()=>{h(!d)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex min-h-full flex-col justify-center px-10 py-12 lg:px-8",style:{backgroundImage:"url('/assets/bg.jpg')",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",paddingBottom:"9rem"},children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx("h1",{className:"mt-15 text-center text-2xl font-bold leading-9 tracking-tight text-red-500",children:"MIND CARE"}),e.jsx("h2",{className:"mt-15 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign up for an account"})]}),e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsxs("form",{className:"space-y-4",onSubmit:v,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-bold leading-6 text-gray-900",children:"Name"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",value:r.name,onChange:c,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),i.namered&&e.jsx("div",{className:"text-red-500 mt-1",children:n.nameerr})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-md font-bold leading-6 text-gray-900",children:"Email address"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:r.email,onChange:c,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),i.emailred&&e.jsx("div",{className:"text-red-500 mt-1",children:n.emailerr})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-md font-bold leading-6 text-gray-900",children:"Password"}),e.jsxs("div",{className:"mt-1 relative rounded-md border border-gray-300",children:[e.jsx("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"new-password",value:r.password,onChange:c,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 px-3 py-1.5 text-sm font-semibold text-gray-900 bg-transparent border-l border-gray-300 focus:outline-none",onClick:f,children:d?"Hide":"Show"})]}),i.passwordred&&e.jsx("div",{className:"text-red-500 mt-1",children:n.passworderr})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-md font-bold  leading-6 text-gray-900",children:"Confirm Password"}),e.jsxs("div",{className:"mt-1 relative rounded-md border border-gray-300",children:[e.jsx("input",{id:"confirmPassword",name:"confirmpassword",type:d?"text":"password",autoComplete:"new-password",value:r.confirmpassword,onChange:c,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 px-3 py-1.5 text-sm font-semibold text-gray-900 bg-transparent border-l border-gray-300 focus:outline-none",onClick:f,children:d?"Hide":"Show"})]}),i.confirmpasswordred&&e.jsx("div",{className:"text-red-500 mt-1",children:n.confirmpassworderr})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Sign up"})})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{className:"text-center text-sm text-gray-500",children:"OR"}),e.jsx(E,{onSuccess:t=>{const s=F(t.credential);j(s)},onError:()=>{console.log("singup Failed")}})]}),e.jsxs("p",{className:"mt-8 text-center text-sm text-gray-500",children:["Already have an account?"," ",e.jsx(k,{to:"/login",className:"font-semibold leading-6 text-indigo-600 hover:text-indigo-500",children:"Sign in"})]})]})]})})}export{A as default};
