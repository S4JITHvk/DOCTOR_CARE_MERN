import{r,j as e,_ as f}from"./index-DDg8tmzP.js";import{c as w,d as N}from"./index-C2XjEMwL.js";import"./sweetalert2.all-BcwuNuaI.js";import{f as k,u as v}from"./adminService-Dh3wFakp.js";function M(){const[l,h]=r.useState([]),[p,m]=r.useState(!0),[n,u]=r.useState(""),[c,d]=r.useState(1),a=10,i=async()=>{const s=await k();if(s.status===200){const t=s.data.data.filter(j=>j.name.toLowerCase().includes(n.toLowerCase()));h(t),m(!1)}};r.useEffect(()=>{i()},[n]);const g=async s=>{const t=await v(s);t.status===200?(i(),f.success(t.data.message)):console.log("Failed to ban user")},x=c*a,b=x-a,y=l.slice(b,x),o=s=>{d(s==="prev"?t=>Math.max(t-1,1):s==="next"?t=>Math.min(t+1,Math.ceil(l.length/a)):s)};return p?e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Fetching users..."})}):e.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg m-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Users List"}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap bg-white dark:bg-gray-900 p-2 rounded-lg",children:[e.jsx("label",{htmlFor:"table-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"text",id:"table-search-users",className:"block p-1 pl-8 text-sm text-gray-900 border border-gray-300 rounded-lg w-60 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search for users",value:n,onChange:s=>u(s.target.value)})]})]}),e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400 mt-2",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-2",children:"Name"}),e.jsx("th",{scope:"col",className:"px-4 py-2",children:"Email"}),e.jsx("th",{scope:"col",className:"px-4 py-2",children:"Joined"}),e.jsx("th",{scope:"col",className:"px-4 py-2",children:"Updated"}),e.jsx("th",{scope:"col",className:"px-4 py-2",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-2",children:"Role"}),e.jsx("th",{scope:"col",className:"px-4 py-2",children:"Ban/Unban"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:s.email}),e.jsx("td",{className:"px-4 py-2",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-2",children:new Date(s.updatedAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-2",children:s.is_banned?"Inactive":"Active"}),e.jsx("td",{className:"px-4 py-2",children:s.role}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{className:`py-1 px-3 rounded ${s.is_banned?"bg-green-500 text-white":"bg-red-500 text-white"}`,onClick:()=>g(s._id),style:{width:"80px"},children:s.is_banned?"Unblock":"Block"})})]},s._id))})]}),e.jsxs("div",{className:"flex justify-center ",children:[e.jsx("button",{onClick:()=>o("prev"),className:"px-2 py-1 mx-1 rounded bg-blue-500 text-white border border-gray-300",disabled:c===1,children:e.jsx(w,{})}),[...Array(Math.min(3,Math.ceil(l.length/a))).keys()].map(s=>e.jsx("button",{onClick:()=>o(s+1),className:`px-2 py-1 mx-1 rounded ${c===s+1?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"} border border-gray-300`,children:s+1},s+1)),e.jsx("button",{onClick:()=>o("next"),className:"px-2 py-1 mx-1 rounded bg-blue-500 text-white border border-gray-300",disabled:c===Math.ceil(l.length/a),children:e.jsx(N,{})})]})]})}export{M as default};
