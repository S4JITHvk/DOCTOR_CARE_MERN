import{u as w,r as o,a as E,j as s,I as R,_ as u}from"./index-DDg8tmzP.js";import{v as b,r as S}from"./userAuth-B5iPBnBM.js";function T(){const f=w(),[i,j]=o.useState(["","","",""]),[v,c]=o.useState(Array(4).fill(!1)),[m,l]=o.useState(""),[g,p]=o.useState(!1),[d,x]=o.useState(60),h=E();o.useEffect(()=>{let n;return d>0?n=setInterval(()=>{x(e=>e-1)},1e3):p(!0),()=>clearInterval(n)},[d]);const N=(n,e)=>{if(/^\d*$/.test(e)&&e.length<=1){const t=[...i];t[n]=e,j(t),c(r=>{const a=[...r];return a[n]=!1,a})}else c(t=>{const r=[...t];return r[n]=!0,r})},y=async n=>{n.preventDefault();const e=i.join("");if(e.length<4){l("Please enter a 4-digit OTP"),c(Array(4).fill(!0));return}const{state:t}=h;if(t&&(t.action==="User_forgot_pass"||t.action==="Doctor_forgot_pass")){const r=t.email,a=await b(e,t);a.status===200?f("/Resetpass",{state:{email:r,action:a.data.message}}):a.status===400&&l("Otp Not Matched! Request denied")}else{const r=await b(e,t);r.status===200?(u.success(r.data.message),f("/")):r.status===400&&l("Otp Not Matched! Request denied")}},O=async()=>{const{state:n}=h;x(20),p(!1),(await S(n)).status===200?u.success("OTP successfully resent."):u.error("Failed to resend OTP.")};return s.jsxs("div",{className:"flex min-h-screen justify-center items-center",style:{backgroundImage:"url('/public/assets/bg.jpg')",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[s.jsx(R,{position:"top-center",reverseOrder:!1}),s.jsxs("div",{className:"bg-white p-8 rounded-md shadow-lg",children:[s.jsx("h1",{className:"text-2xl font-bold text-center text-red-500 mb-6",children:"MIND CARE"}),s.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-6",children:"Enter OTP"}),s.jsxs("form",{className:"space-y-4",onSubmit:y,children:[m&&s.jsx("div",{className:"text-red-500 text-xs mb-4 ml-5",children:m}),s.jsx("div",{className:"flex justify-center",children:i.map((n,e)=>s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",maxLength:1,value:n,onChange:t=>N(e,t.target.value),className:`w-10 h-10 text-center border rounded-md focus:outline-none focus:ring focus:ring-indigo-500 ml-2 ${v[e]?"border-red-500":""}`})},e))}),s.jsx("button",{type:"submit",className:"w-full bg-indigo-500 text-white py-2 rounded-md hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-500",children:"Submit"})]}),s.jsx("div",{className:"flex justify-center mt-4",children:s.jsxs("button",{onClick:O,disabled:!g,className:"text-indigo-500 hover:underline focus:outline-none",children:["Resend OTP ",g?"":`(${d}s)`]})})]})]})}export{T as default};
