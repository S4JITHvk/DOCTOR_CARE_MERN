import{r as a,j as e}from"./index-DDg8tmzP.js";import{c as w,d as B}from"./index-C2XjEMwL.js";import{S as n}from"./sweetalert2.all-BcwuNuaI.js";import{g as C,h as v}from"./adminService-Dh3wFakp.js";function _(){const[o,x]=a.useState([]),[h,b]=a.useState(!0),[t,c]=a.useState(1),[r,m]=a.useState(1),p=10,[l,u]=a.useState({}),d=async()=>{const s=await C(t,p);s.status===200&&(x(s.data.cancelledBookings),m(s.data.totalPages),b(!1))};a.useEffect(()=>{d()},[t]);const y=()=>{t<r&&c(t+1)},g=()=>{t>1&&c(t-1)},j=async s=>{n.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, mark as done!"}).then(async f=>{if(f.isConfirmed)try{(await v(s)).status===200&&(d(),u(N=>({...N,[s]:!0})),n.fire("Done!","Booking has been marked as done.","success"))}catch(i){console.error("There was an error!",i),n.fire("Error!","There was an issue marking the booking as done.","error")}})};return h?e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Cancelled Bookings"}),o.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b",children:"Doctor"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Booking Date"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Patient"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Status"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Amount"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Payment ID"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Reason"}),e.jsx("th",{className:"py-2 px-4 border-b",children:"Actions"})]})}),e.jsx("tbody",{children:o.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-4 border-b",children:s.doctorDetails.name}),e.jsx("td",{className:"py-2 px-4 border-b",children:new Date(s.date).toISOString().split("T")[0]}),e.jsx("td",{className:"py-2 px-4 border-b",children:s.userDetails.name}),e.jsx("td",{className:"py-2 px-4 border-b",children:s.status}),e.jsx("td",{className:"py-2 px-4 border-b",children:"$499"}),e.jsx("td",{className:"py-2 px-4 border-b",children:s.payment.paymentId}),e.jsx("td",{className:"py-2 px-4 border-b",children:"Emergency"}),e.jsx("td",{className:"py-2 px-4 border-b",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>j(s._id),disabled:l[s._id],className:`px-2 py-1 ${l[s._id]?"bg-gray-500":"bg-green-500 hover:bg-green-700"} text-white rounded`,children:"Refund"})})})]},s._id))})]})}):e.jsx("p",{className:"text-center",children:"No cancelled bookings found."}),e.jsxs("div",{className:"flex justify-center mt-4 items-center",children:[e.jsx("button",{onClick:g,disabled:t===1,className:`px-4 py-2 mx-1 ${t===1?"bg-gray-300":"bg-blue-500 hover:bg-blue-700"} text-white rounded`,children:e.jsx(w,{})}),e.jsx("span",{className:"px-4 py-2 text-gray-700",children:`Page ${t} of ${r}`}),e.jsx("button",{onClick:y,disabled:t===r,className:`px-4 py-2 mx-1 ${t===r?"bg-gray-300":"bg-blue-500 hover:bg-blue-700"} text-white rounded`,children:e.jsx(B,{})})]})]})}export{_ as default};
