import{r as j,d as Ee,c as Be,j as o,F as ke,k as Fe,_ as $,p as me}from"./index-DDg8tmzP.js";import{S as he}from"./sweetalert2.all-BcwuNuaI.js";import{d as De,a as Oe}from"./doctorService-BeaFpf1z.js";/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function pe(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),t.push.apply(t,r)}return t}function q(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pe(Object(t),!0).forEach(function(r){Pe(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function Re(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function be(a,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,we(r.key),r)}}function Ue(a,e,t){return e&&be(a.prototype,e),t&&be(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function Pe(a,e,t){return e=we(e),e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function V(){return V=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},V.apply(this,arguments)}function Ce(a,e){if(typeof a!="object"||a===null)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function we(a){var e=Ce(a,"string");return typeof e=="symbol"?e:String(e)}var je={exports:{}};(function(a){typeof window>"u"||function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,r=e.Blob&&function(){try{return!!new Blob}catch{return!1}}(),i=r&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,d=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(r||n)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(l){var c,f,m,y,p,s,w,b,E;if(c=l.match(d),!c)throw new Error("invalid data URI");for(f=c[2]?c[1]:"text/plain"+(c[3]||";charset=US-ASCII"),m=!!c[4],y=l.slice(c[0].length),m?p=atob(y):p=decodeURIComponent(y),s=new ArrayBuffer(p.length),w=new Uint8Array(s),b=0;b<p.length;b+=1)w[b]=p.charCodeAt(b);return r?new Blob([i?w:s],{type:f}):(E=new n,E.append(s),E.getBlob(f))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(l,c,f){var m=this;setTimeout(function(){f&&t.toDataURL&&u?l(u(m.toDataURL(c,f))):l(m.mozGetAsFile("blob",c))})}:t.toDataURL&&u&&(t.msToBlob?t.toBlob=function(l,c,f){var m=this;setTimeout(function(){(c&&c!=="image/png"||f)&&t.toDataURL&&u?l(u(m.toDataURL(c,f))):l(m.msToBlob(c))})}:t.toBlob=function(l,c,f){var m=this;setTimeout(function(){l(u(m.toDataURL(c,f)))})})),a.exports?a.exports=u:e.dataURLtoBlob=u}(window)})(je);var ge=je.exports,Te=function(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},ve={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Ae=typeof window<"u"&&typeof window.document<"u",F=Ae?window:{},K=function(e){return e>0&&e<1/0},Se=Array.prototype.slice;function ae(a){return Array.from?Array.from(a):Se.call(a)}var He=/^image\/.+$/;function re(a){return He.test(a)}function Le(a){var e=re(a)?a.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var Ne=String.fromCharCode;function _e(a,e,t){var r="",i;for(t+=e,i=e;i<t;i+=1)r+=Ne(a.getUint8(i));return r}var Ie=F.btoa;function xe(a,e){for(var t=[],r=8192,i=new Uint8Array(a);i.length>0;)t.push(Ne.apply(null,ae(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(Ie(t.join("")))}function Me(a){var e=new DataView(a),t;try{var r,i,n;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var d=e.byteLength,u=2;u+1<d;){if(e.getUint8(u)===255&&e.getUint8(u+1)===225){i=u;break}u+=1}if(i){var l=i+4,c=i+10;if(_e(e,l,4)==="Exif"){var f=e.getUint16(c);if(r=f===18761,(r||f===19789)&&e.getUint16(c+2,r)===42){var m=e.getUint32(c+4,r);m>=8&&(n=c+m)}}}if(n){var y=e.getUint16(n,r),p,s;for(s=0;s<y;s+=1)if(p=n+s*12+2,e.getUint16(p,r)===274){p+=8,t=e.getUint16(p,r),e.setUint16(p,1,r);break}}}catch{t=1}return t}function We(a){var e=0,t=1,r=1;switch(a){case 2:t=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:r}}var ze=/\.\d*(?:0|9){12}\d*$/;function ye(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ze.test(a)?Math.round(a*e)/e:a}function W(a){var e=a.aspectRatio,t=a.height,r=a.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",n=K(r),d=K(t);if(n&&d){var u=t*e;(i==="contain"||i==="none")&&u>r||i==="cover"&&u<r?t=r/e:r=t*e}else n?t=r/e:d&&(r=t*e);return{width:r,height:t}}function Ge(a){for(var e=ae(new Uint8Array(a)),t=e.length,r=[],i=0;i+3<t;){var n=e[i],d=e[i+1];if(n===255&&d===218)break;if(n===255&&d===216)i+=2;else{var u=e[i+2]*256+e[i+3],l=i+u+2,c=e.slice(i,l);r.push(c),i=l}}return r.reduce(function(f,m){return m[0]===255&&m[1]===225?f.concat(m):f},[])}function Ye(a,e){var t=ae(new Uint8Array(a));if(t[2]!==255||t[3]!==224)return a;var r=t[4]*256+t[5],i=[255,216].concat(e,t.slice(4+r));return new Uint8Array(i)}var Xe=F.ArrayBuffer,te=F.FileReader,C=F.URL||F.webkitURL,$e=/\.\w+$/,qe=F.Compressor,Ve=function(){function a(e,t){Re(this,a),this.file=e,this.exif=[],this.image=new Image,this.options=q(q({},ve),t),this.aborted=!1,this.result=null,this.init()}return Ue(a,[{key:"init",value:function(){var t=this,r=this.file,i=this.options;if(!Te(r)){this.fail(new Error("The first argument must be a File or Blob object."));return}var n=r.type;if(!re(n)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!C||!te){this.fail(new Error("The current browser does not support image compression."));return}Xe||(i.checkOrientation=!1,i.retainExif=!1);var d=n==="image/jpeg",u=d&&i.checkOrientation,l=d&&i.retainExif;if(C&&!u&&!l)this.load({url:C.createObjectURL(r)});else{var c=new te;this.reader=c,c.onload=function(f){var m=f.target,y=m.result,p={},s=1;u&&(s=Me(y),s>1&&V(p,We(s))),l&&(t.exif=Ge(y)),u||l?!C||s>1?p.url=xe(y,n):p.url=C.createObjectURL(r):p.url=y,t.load(p)},c.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},c.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},c.onloadend=function(){t.reader=null},u||l?c.readAsArrayBuffer(r):c.readAsDataURL(r)}}},{key:"load",value:function(t){var r=this,i=this.file,n=this.image;n.onload=function(){r.draw(q(q({},t),{},{naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight}))},n.onabort=function(){r.fail(new Error("Aborted to load the image."))},n.onerror=function(){r.fail(new Error("Failed to load the image."))},F.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(F.navigator.userAgent)&&(n.crossOrigin="anonymous"),n.alt=i.name,n.src=t.url}},{key:"draw",value:function(t){var r=this,i=t.naturalWidth,n=t.naturalHeight,d=t.rotate,u=d===void 0?0:d,l=t.scaleX,c=l===void 0?1:l,f=t.scaleY,m=f===void 0?1:f,y=this.file,p=this.image,s=this.options,w=document.createElement("canvas"),b=w.getContext("2d"),E=Math.abs(u)%180===90,D=(s.resize==="contain"||s.resize==="cover")&&K(s.width)&&K(s.height),B=Math.max(s.maxWidth,0)||1/0,O=Math.max(s.maxHeight,0)||1/0,R=Math.max(s.minWidth,0)||0,U=Math.max(s.minHeight,0)||0,k=i/n,h=s.width,g=s.height;if(E){var H=[O,B];B=H[0],O=H[1];var T=[U,R];R=T[0],U=T[1];var L=[g,h];h=L[0],g=L[1]}D&&(k=h/g);var v=W({aspectRatio:k,width:B,height:O},"contain");B=v.width,O=v.height;var z=W({aspectRatio:k,width:R,height:U},"cover");if(R=z.width,U=z.height,D){var A=W({aspectRatio:k,width:h,height:g},s.resize);h=A.width,g=A.height}else{var G=W({aspectRatio:k,width:h,height:g}),Y=G.width;h=Y===void 0?i:Y;var X=G.height;g=X===void 0?n:X}h=Math.floor(ye(Math.min(Math.max(h,R),B))),g=Math.floor(ye(Math.min(Math.max(g,U),O)));var x=-h/2,N=-g/2,P=h,_=g,J=[];if(D){var ie=0,ne=0,Q=i,Z=n,oe=W({aspectRatio:k,width:i,height:n},{contain:"cover",cover:"contain"}[s.resize]);Q=oe.width,Z=oe.height,ie=(i-Q)/2,ne=(n-Z)/2,J.push(ie,ne,Q,Z)}if(J.push(x,N,P,_),E){var se=[g,h];h=se[0],g=se[1]}w.width=h,w.height=g,re(s.mimeType)||(s.mimeType=y.type);var le="transparent";y.size>s.convertSize&&s.convertTypes.indexOf(s.mimeType)>=0&&(s.mimeType="image/jpeg");var ce=s.mimeType==="image/jpeg";if(ce&&(le="#fff"),b.fillStyle=le,b.fillRect(0,0,h,g),s.beforeDraw&&s.beforeDraw.call(this,b,w),!this.aborted&&(b.save(),b.translate(h/2,g/2),b.rotate(u*Math.PI/180),b.scale(c,m),b.drawImage.apply(b,[p].concat(J)),b.restore(),s.drew&&s.drew.call(this,b,w),!this.aborted)){var ue=function(I){if(!r.aborted){var de=function(M){return r.done({naturalWidth:i,naturalHeight:n,result:M})};if(I&&ce&&s.retainExif&&r.exif&&r.exif.length>0){var fe=function(M){return de(ge(xe(Ye(M,r.exif),s.mimeType)))};if(I.arrayBuffer)I.arrayBuffer().then(fe).catch(function(){r.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var S=new te;r.reader=S,S.onload=function(ee){var M=ee.target;fe(M.result)},S.onabort=function(){r.fail(new Error("Aborted to read the compressed image with FileReader."))},S.onerror=function(){r.fail(new Error("Failed to read the compressed image with FileReader."))},S.onloadend=function(){r.reader=null},S.readAsArrayBuffer(I)}}else de(I)}};w.toBlob?w.toBlob(ue,s.mimeType,s.quality):ue(ge(w.toDataURL(s.mimeType,s.quality)))}}},{key:"done",value:function(t){var r=t.naturalWidth,i=t.naturalHeight,n=t.result,d=this.file,u=this.image,l=this.options;if(C&&u.src.indexOf("blob:")===0&&C.revokeObjectURL(u.src),n)if(l.strict&&!l.retainExif&&n.size>d.size&&l.mimeType===d.type&&!(l.width>r||l.height>i||l.minWidth>r||l.minHeight>i||l.maxWidth<r||l.maxHeight<i))n=d;else{var c=new Date;n.lastModified=c.getTime(),n.lastModifiedDate=c,n.name=d.name,n.name&&n.type!==d.type&&(n.name=n.name.replace($e,Le(n.type)))}else n=d;this.result=n,l.success&&l.success.call(this,n)}},{key:"fail",value:function(t){var r=this.options;if(r.error)r.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=qe,a}},{key:"setDefaults",value:function(t){V(ve,t)}}]),a}();function et(){const[a,e]=j.useState(""),[t,r]=j.useState(null),[i,n]=j.useState(""),[d,u]=j.useState(""),[l,c]=j.useState(""),[f,m]=j.useState(""),[y,p]=j.useState(""),[s,w]=j.useState(""),[b,E]=j.useState(""),[D,B]=j.useState(""),[O,R]=j.useState(""),[U,k]=j.useState(""),[h,g]=j.useState({}),[H,T]=j.useState(!1),L=Ee(),v=Be(x=>x.doctor);j.useEffect(()=>{v.doctor&&(n(v.doctor.name),u(v.doctor.email),c(v.doctor.phone_number),m(v.doctor.expertise),p(v.doctor.experience_years),w(v.doctor.working_Hospital),E(v.doctor.working_Hospital_contact),B(v.doctor.dob.split("T")[0]),R(v.doctor.gender),k(v.doctor.medical_license_no),e(v.doctor.profile||""))},[v.doctor]);const z=x=>{const N=x.target.files[0];N&&new Ve(N,{quality:.6,maxWidth:800,maxHeight:800,success(P){const _=new FileReader;_.onloadend=()=>{e(_.result),r(P),T(!0)},_.readAsDataURL(P)},error(P){console.log(P.message)}})},A=x=>N=>{x(N.target.value),T(!0)},G=()=>{const x={};return i.trim()===""&&(x.name="Name is required"),(l.trim()===""||!/^\d{10}$/.test(l))&&(x.phoneNumber="Phone number is required and must be 10 digits"),D.trim()===""&&(x.dob="Date of birth is required"),g(x),Object.keys(x).length===0},Y=async x=>{if(x.preventDefault(),!G())return;const N=new FormData;N.append("name",i),N.append("phone_number",l),N.append("dob",D),t&&N.append("profilePic",t),(await De(N)).status===200?($.success("Profile updated successfully"),me(L),T(!1)):$.error("Failed to update profile")},X=async()=>{(await he.fire({title:"Are you sure?",text:"Remove Profile image.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed&&((await Oe()).status===200?(me(L),e(null),r(null),$.success("Profile Picture removed successfully."),he.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"})):$.error("Failed to update profile"))};return o.jsx("div",{className:"col-span-4 sm:col-span-9 flex justify-center ",children:o.jsx("div",{className:"bg-white shadow rounded-lg px-8 py-10 w-full max-w-6xl",children:o.jsxs("form",{onSubmit:Y,children:[o.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[o.jsx("img",{src:a||"/assets/doctor.jpg",className:"w-24 h-24 bg-green-500 rounded-full mb-4 mt-2 object-cover",alt:"Profile"}),o.jsxs("div",{className:"flex items-center justify-center mb-4",children:[o.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer bg-blue-500 text-white py-2 px-4 rounded-full shadow-md hover:bg-blue-700 transition duration-300 ease-in-out",children:[o.jsx(ke,{className:"text-2xl"}),o.jsx("input",{id:"file-upload",type:"file",className:"hidden",accept:"image/*",onChange:z})]}),a&&a!=="/assets/doctor.jpg"&&o.jsx("button",{type:"button",onClick:X,className:"ml-4 bg-red-500 text-white py-2 px-4 rounded-full shadow-md hover:bg-red-700 transition duration-300 ease-in-out",children:o.jsx(Fe,{className:"text-2xl"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-bold mb-2",children:"Name"}),o.jsx("input",{type:"text",id:"name",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your name",value:i,onChange:A(n)}),h.name&&o.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.name})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"medical_license_no",className:"block text-gray-700 font-bold mb-2",children:"Medical License Number"}),o.jsx("input",{type:"text",id:"medical_license_no",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your medical license number",value:U,readOnly:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-bold mb-2",children:"Email"}),o.jsx("input",{type:"email",id:"email",className:"w-full border rounded-md py-2 px-3 text-gray-700 leading-tight custom-border-green focus:border-blue-500 border-green-500",placeholder:"Enter your email",value:d,readOnly:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"expertise",className:"block text-gray-700 font-bold mb-2",children:"Expertise"}),o.jsx("input",{type:"text",id:"expertise",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your expertise",value:f,readOnly:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"phone_number",className:"block text-gray-700 font-bold mb-2",children:"Phone Number"}),o.jsx("input",{type:"text",id:"phone_number",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your phone number",value:l,onChange:A(c)}),h.phoneNumber&&o.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.phoneNumber})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"experience_years",className:"block text-gray-700 font-bold mb-2",children:"Years of Experience"}),o.jsx("input",{type:"number",id:"experience_years",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your years of experience",value:y,readOnly:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"dob",className:"block text-gray-700 font-bold mb-2",children:"Date of Birth"}),o.jsx("input",{type:"date",id:"dob",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",value:D,onChange:A(B)}),h.dob&&o.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.dob})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"working_Hospital",className:"block text-gray-700 font-bold mb-2",children:"Working Hospital"}),o.jsx("input",{type:"text",id:"working_Hospital",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight",placeholder:"Enter your working hospital",value:s,readOnly:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"gender",className:"block text-gray-700 font-bold mb-2",children:"Gender"}),o.jsx("input",{type:"text",id:"gender",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your gender",value:O,readOnly:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"working_Hospital_contact",className:"block text-gray-700 font-bold mb-2",children:"Working Hospital Contact"}),o.jsx("input",{type:"text",id:"working_Hospital_contact",className:"w-full border border-green-500 rounded-md py-2 px-3 text-gray-700 leading-tight",placeholder:"Enter your working hospital contact",value:b,readOnly:!0})]})]}),o.jsx("div",{className:"flex justify-center mt-6",children:o.jsx("button",{type:"submit",className:`px-4 py-2 rounded ${H?"bg-blue-500 text-white":"bg-gray-500 text-white cursor-not-allowed"}`,disabled:!H,children:"Update Profile"})})]})})})}export{et as default};
