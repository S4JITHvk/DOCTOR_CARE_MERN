import{c as C,n as v,r as l,a as y,u as k,j as i,w as D,z as u}from"./index-DDg8tmzP.js";const b="919371831",j="bf4e835c6eeab8a1f5ebc95e8ce554a0";function d(t){let e="";if(e)return e;var n="12345qwertyuiopasdfgh67890jklmnbvcxzMNBVCZXASDQWERTYHGFUIOLKJP",a=n.length,o;for(t=t||5,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*a));return e}function P(t=window.location.href){let e=t.split("?")[1];return new URLSearchParams(e)}function E(){const t=C(c=>c.doctor.doctor),{socket:e}=v(),[n,a]=l.useState(0),o=y(),h=k(),r=o.state,m=t,s=P().get("roomID")||d(5);l.useEffect(()=>{const c=async w=>{const p=b,x=j,I=u.ZegoUIKitPrebuilt.generateKitTokenForTest(p,x,s,d(5),d(5));u.ZegoUIKitPrebuilt.create(I).joinRoom({container:w,sharedLinks:[{name:"Personal link",url:window.location.protocol+"//"+window.location.host+"/redirectToCall?roomID="+s+"&userId="+r}],scenario:{mode:u.ZegoUIKitPrebuilt.OneONoneCall}})},g=`${window.location.protocol}//${window.location.host}/redirectToCall?roomID=${s}&userId=${r}`;n===0&&(e.emit("callingUser",{Caller:m,userId:r,personalLink:g}),a(1)),c(document.querySelector(".myCallContainer"))},[s,r]),l.useEffect(()=>()=>{window.location.reload()},[]);const f=()=>{h(-1)};return i.jsxs("div",{style:{width:"80vw",height:"80vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[i.jsx("div",{className:"myCallContainer",style:{width:"80vw",height:"80vh"}}),i.jsxs("button",{onClick:f,style:{width:"50%",height:"10%",display:"flex",alignItems:"center",justifyContent:"center"},className:"bg-red-500 text-white rounded-lg",children:[i.jsx(D,{className:"mr-2"}),"Disconnect"]})]})}export{E as default,P as getUrlParams};
