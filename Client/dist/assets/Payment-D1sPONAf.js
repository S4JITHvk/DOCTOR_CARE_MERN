import{c as h,d as y,a as w,r,l as v,j as e,m as S}from"./index-DDg8tmzP.js";import{p as P}from"./userService-B62CsAJS.js";function _(){const c=h(t=>t.user),x=y(),p=w(),{selectedDoctor:s,selectedDate:n,selectedShift:d}=p.state,[u,m]=r.useState(!1),[o,b]=r.useState("online"),l=h(t=>{var a;return(a=t.appointments)==null?void 0:a.appointments}),f=()=>e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:"Video Call Consultation"}),e.jsx("li",{children:"Chat Support"}),e.jsx("li",{children:"Call with Experienced Doctor"}),e.jsx("li",{children:"Share your feelings and problems"})]});r.useEffect(()=>{var a;const t=(a=l==null?void 0:l.appointments)==null?void 0:a.find(i=>i.userId===c.user._id);x(v({appointments:l,userAppointment:t}))},[]);const j=t=>{b(t)},g=async()=>{if(l==null?void 0:l.find(i=>(i==null?void 0:i.userId)===c.user._id)){alert("The slot is already booked. Please select another slot.");return}const a={doctorId:s._id,userId:c.user._id,date:n.toISOString().split("T")[0],shift:d};if(await x(S(a)),o==="online"){const i={doctorId:s._id,userId:c.user._id,date:n.toISOString().split("T")[0],shift:d},N=(await P(i)).data.session.url;window.location.href=N}else console.log("redirecting to wallet")};return e.jsxs("div",{className:"container mx-auto p-8 flex flex-col justify-between h-full",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-4 text-blue-800",children:"Confirm Booking"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 flex justify-between flex-wrap",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsxs("div",{className:" w-full mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-800 mb-2",children:"Doctor Details"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Name:"})," DR"," ",s==null?void 0:s.name]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Experience:"})," ",s==null?void 0:s.experience_years," years"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Expertise:"})," ",s==null?void 0:s.expertise]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-800 mb-2",children:"Appointment Details"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Date:"})," ",n==null?void 0:n.toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Time:"})," ",d]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-800 mb-2",children:"Payment Details"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Amount:"})," $499"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-800 mb-2",children:"Facilities Provided"}),f()]})]}),e.jsxs("div",{className:"w-1/2 flex flex-col items-center justify-center",children:[e.jsx("img",{src:"/assets/check1.jpg",alt:"Image 1",className:"w-[350px] h-[200px] mb-6 hidden md:block"}),e.jsx("img",{src:"/assets/check2.jpg",alt:"Image 3",className:"w-[350px] h-[200px] hidden md:block"})]}),e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700",onClick:()=>m(!0),children:"Proceed to Payment"})})]}),u&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-900 bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Select Payment Option"}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"online",checked:o==="online",onChange:()=>j("online")}),"Pay Online"]})}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-700",onClick:()=>m(!1),children:"Close"}),e.jsx("button",{className:`px-4 py-2 ${o?"bg-blue-500 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"} text-white rounded`,onClick:g,disabled:!o,children:"Proceed"})]})]})})]})}export{_ as default};
