import{c as F,d as E,r,j as e,F as P,k as I,_ as o,f as j}from"./index-DDg8tmzP.js";import{S as U}from"./sweetalert2.all-BcwuNuaI.js";import{E as D,c as k}from"./userService-B62CsAJS.js";import{S as B}from"./Sidebar-DnT6ow9c.js";import"./user-BohdSzpg.js";function R(){const a=F(t=>t.user),d=E(),[n,f]=r.useState(a.user.name),[p,y]=r.useState(a.user.email),[l,i]=r.useState(null),[c,x]=r.useState(null),[g,u]=r.useState({}),[h,m]=r.useState(!1);r.useEffect(()=>{f(a.user.name),y(a.user.email),i(a.user.profile)},[a.user]);const N=t=>{f(t.target.value),m(t.target.value.trim()!==a.user.name||c!==null),t.target.value.trim()===""?u(s=>({...s,name:"Name is required"})):u(s=>({...s,name:""}))},v=t=>{const s=t.target.files[0];x(s);const b=URL.createObjectURL(s);i(b),m(!0)},w=async t=>{if(t.preventDefault(),n.trim()===""){u(C=>({...C,name:"Name is required"}));return}const s=new FormData;s.append("name",n),s.append("email",p),c&&s.append("profilePic",c),(await D(s)).status===200?(o.success("Profile updated successfully"),j(d),m(!1)):o.error("Failed to update profile")},S=async()=>{(await U.fire({title:"Are you sure?",text:"Remove Profile image.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed&&((await k()).status===200?(j(d),i(null),x(null),o.success("Profile Picture removed successfully.")):o.error("Failed to update profile"))};return e.jsx("div",{className:"col-span-4 sm:col-span-9 flex justify-center",children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full max-w-2xl",children:e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[e.jsx("img",{src:l||"/assets/user.png",className:"w-32 h-32 bg-gray-300 rounded-full mb-4 border-4 border-gray-200 object-cover",alt:"Profile"}),e.jsxs("div",{className:"flex items-center justify-center mb-4 space-x-4",children:[e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer text-blue-500 hover:text-blue-700",children:[e.jsx(P,{className:"text-2xl"}),e.jsx("input",{id:"file-upload",type:"file",className:"hidden",accept:"image/*",onChange:v})]}),l&&l!=="/assets/user.png"&&e.jsx("button",{type:"button",onClick:S,className:"text-red-500 hover:text-red-700",children:e.jsx(I,{className:"text-2xl"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-bold mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",className:"w-full border border-gray-300 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your name",value:n,onChange:N}),g.name&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:g.name})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-bold mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",className:"w-full border border-gray-300 rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-blue-500",placeholder:"Enter your email",value:p,readOnly:!0})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:`bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-bold py-2 px-8 rounded-full focus:outline-none focus:shadow-outline transform transition-transform duration-300 ${!h&&"opacity-50 cursor-not-allowed"}`,disabled:!h,children:"Save Profile"})})]})})})}function A(){return e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-12 gap-6 px-4",children:[e.jsx(B,{}),e.jsx(R,{})]})})})}export{A as default};
